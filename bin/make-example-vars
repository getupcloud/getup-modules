#!/usr/bin/env python

import re
import os
import sys
import json

config = {}
var_start_re = re.compile('^\s*variable\s+"?([^\s"]+)"?.*')
var_end_re = re.compile('^\s*}\s*')

with open('examples/config.json', 'r') as f:
    config = json.load(f)

print(f'# File auto-generated by {sys.argv[0]}')
print()

ignore = False
for line in sys.stdin.readlines():
    start_match = var_start_re.match(line)
    end_match = var_end_re.match(line) if not start_match else None

    if start_match:
        (name, ) = start_match.groups()
        ignore = name in config["ignore_var"]
    elif end_match:
        if ignore:
            print('#', end='')
        ignore = False

    if ignore:
        print('#', end='')

    print(line, end='')
